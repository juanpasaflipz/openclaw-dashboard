# 06 — Dashboard UI

The observability UI is a tab within the existing single-page dashboard, accessible from the **Workbench** dropdown menu.

## Tab Structure

The Observability tab has four sub-views:

### 1. Agents Overview (default)

**KPI Cards** (top row):
- Today's Cost (USD)
- Today's LLM Calls
- Today's Errors
- Active Agents (24h)
- Unacknowledged Alerts

**Agents Table:**
| Column | Source |
|--------|--------|
| Agent Name | `agent.name` |
| Total Runs | Sum of `total_runs` |
| Success Rate | `successful_runs / total_runs` |
| Cost (USD) | Sum of `total_cost_usd` |
| Tokens | Sum of `total_tokens_in + total_tokens_out` |
| P95 Latency | Latest `latency_p95_ms` |

Clicking an agent row opens the **Agent Detail** panel.

### 2. Agent Detail Panel

Shows when an agent is selected from the overview table:

- **Cost Over Time** — Canvas line chart, last 30 days
- **Latency Over Time** — Canvas line chart (P50 + P95), last 30 days
- **Recent Events** — Table of last 50 events for this agent

### 3. Events Log

Filterable event log with dropdowns:
- **Event Type** filter (all types)
- **Status** filter (success/error/info)

Displays: timestamp, type, status, agent, model, tokens, cost, latency.

### 4. Alerts

Two sections:
- **Alert Rules** — Create, toggle, delete rules. Shows name, type, threshold, status, last triggered.
- **Alert Events** — History of fired alerts with acknowledge button.

### 5. API Keys

- List active keys (prefix, name, last used, created)
- Create new key (name input)
- Revoke key (with confirmation)
- New key display (shown once, copy-friendly)

## Charts

Charts use vanilla Canvas 2D API (matching existing codebase patterns). No external charting library.

The `_obsRenderLineChart(canvasId, labels, datasets)` function renders:
- Multiple datasets with different colors
- Grid lines and axis labels
- Data point dots
- Responsive sizing

## Navigation

```
Workbench dropdown → Observability
  └── Sub-tabs: Agents Overview | Events Log | Alerts | API Keys
```

Tab switching is handled by `obsShowView(viewName)` which toggles visibility of the sub-view containers.
